# üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –∫–ª—é—á–∞ –¥–ª—è GitHub Actions

## –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–ª—é—á (–µ—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É)

### –ù–∞ –≤–∞—à–µ–º Mac:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ —É –≤–∞—Å SSH –∫–ª—é—á:**
```bash
ls ~/.ssh/
```

–ò—â–∏—Ç–µ —Ñ–∞–π–ª—ã:
- `id_rsa` (–ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á) –∏ `id_rsa.pub` (–ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á)
- –∏–ª–∏ `id_ed25519` –∏ `id_ed25519.pub`

2. **–ï—Å–ª–∏ –∫–ª—é—á –µ—Å—Ç—å, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:**
```bash
cat ~/.ssh/id_rsa
# –∏–ª–∏
cat ~/.ssh/id_ed25519
```

–í—ã —É–≤–∏–¥–∏—Ç–µ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
```
-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEA... (–º–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–æ–≤)
...
-----END RSA PRIVATE KEY-----
```

3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–°–Å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–≤–∫–ª—é—á–∞—è BEGIN –∏ END —Å—Ç—Ä–æ–∫–∏)**

## –í–∞—Ä–∏–∞–Ω—Ç 2: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π SSH –∫–ª—é—á —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –¥–µ–ø–ª–æ—è

### –ù–∞ –≤–∞—à–µ–º Mac:

1. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π SSH –∫–ª—é—á:**
```bash
ssh-keygen -t ed25519 -f ~/.ssh/github_actions_deploy -C "github-actions-deploy"
```

–ö–æ–≥–¥–∞ —Å–ø—Ä–æ—Å–∏—Ç –ø–∞—Ä–æ–ª—å (passphrase), –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–º–∏—Ç–µ Enter –¥–≤–∞–∂–¥—ã (–±–µ–∑ –ø–∞—Ä–æ–ª—è).

2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä:**
```bash
# –ü–æ–∫–∞–∂–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
cat ~/.ssh/github_actions_deploy.pub
```

3. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ –¥–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á:**
```bash
ssh user@your-server.com
```

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
# –î–æ–±–∞–≤—å—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –≤ authorized_keys
echo "–í–°–¢–ê–í–¨–¢–ï_–°–Æ–î–ê_–°–û–î–ï–†–ñ–ò–ú–û–ï_–ü–£–ë–õ–ò–ß–ù–û–ì–û_–ö–õ–Æ–ß–ê" >> ~/.ssh/authorized_keys

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys
```

4. **–¢–µ–ø–µ—Ä—å —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –ü–†–ò–í–ê–¢–ù–´–ô –∫–ª—é—á –¥–ª—è GitHub:**
```bash
cat ~/.ssh/github_actions_deploy
```

## –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å –≤–º–µ—Å—Ç–æ –∫–ª—é—á–∞ (–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSH –∫–ª—é—á–∏, –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å GitHub Actions workflow –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª—è:

1. –î–æ–±–∞–≤—å—Ç–µ –≤ GitHub Secrets:
   - `SERVER_PASSWORD` - –≤–∞—à –ø–∞—Ä–æ–ª—å –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞

2. –ò–∑–º–µ–Ω–∏—Ç–µ `.github/workflows/deploy.yml`:
```yaml
- name: Deploy to server via SSH
  uses: appleboy/ssh-action@v1.0.0
  with:
    host: ${{ secrets.SERVER_HOST }}
    username: ${{ secrets.SERVER_USER }}
    password: ${{ secrets.SERVER_PASSWORD }}  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–∞—Ä–æ–ª—å –≤–º–µ—Å—Ç–æ –∫–ª—é—á–∞
    port: ${{ secrets.SERVER_PORT }}
```

## üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞ –≤ GitHub

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub**
2. **Settings ‚Üí Secrets and variables ‚Üí Actions**
3. **–ù–∞–∂–º–∏—Ç–µ "New repository secret"**
4. **–ù–∞–∑–≤–∞–Ω–∏–µ:** `SERVER_SSH_KEY`
5. **–ó–Ω–∞—á–µ–Ω–∏–µ:** –í—Å—Ç–∞–≤—å—Ç–µ –ü–†–ò–í–ê–¢–ù–´–ô –∫–ª—é—á —Ü–µ–ª–∏–∫–æ–º:
   ```
   -----BEGIN OPENSSH PRIVATE KEY-----
   b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAA...
   ...–º–Ω–æ–≥–æ —Å—Ç—Ä–æ–∫...
   -----END OPENSSH PRIVATE KEY-----
   ```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:

1. **–ù–ò–ö–û–ì–î–ê –Ω–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á!** –û–Ω –¥–æ–ª–∂–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ GitHub Secrets.

2. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–ø–∏—Ä—É–µ—Ç–µ –ü–†–ò–í–ê–¢–ù–´–ô –∫–ª—é—á** (–±–µ–∑ .pub –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏).

3. **–ö–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á –ø–æ–ª–Ω–æ—Å—Ç—å—é**, –≤–∫–ª—é—á–∞—è —Å—Ç—Ä–æ–∫–∏ BEGIN –∏ END.

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —Å —ç—Ç–∏–º –∫–ª—é—á–æ–º
   ssh -i ~/.ssh/github_actions_deploy user@your-server.com "echo '–†–∞–±–æ—Ç–∞–µ—Ç!'"
   ```

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ï—Å–ª–∏ GitHub Actions –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–∞:**
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤—Å–µ –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫
   - –í–∫–ª—é—á–µ–Ω—ã BEGIN –∏ END —Å—Ç—Ä–æ–∫–∏

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
   ```bash
   ls -la ~/.ssh/
   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: drwx------ –¥–ª—è –ø–∞–ø–∫–∏ .ssh
   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: -rw------- –¥–ª—è authorized_keys
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–µ—Ä–∞:**
   ```bash
   sudo nano /etc/ssh/sshd_config
   ```
   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ:
   ```
   PubkeyAuthentication yes
   AuthorizedKeysFile .ssh/authorized_keys
   ```

4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ SSH —Å–µ—Ä–≤–∏—Å:**
   ```bash
   sudo systemctl restart sshd
   # –∏–ª–∏
   sudo service ssh restart
   ```

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è SSH –∫–ª—é—á–∞ –≤ GitHub Secrets, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!